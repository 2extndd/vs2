# üîç –ê–ù–ê–õ–ò–ó –ü–†–û–ë–õ–ï–ú–´ –° –ü–†–û–ö–°–ò

## üìä –ü–†–û–ë–õ–ï–ú–ê

–í —Å—Ç–∞—Ç—É—Å–µ —Å–∏—Å—Ç–µ–º—ã –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è:
```
üöÄ –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è —Å–∏—Å—Ç–µ–º–∞:
   üìä HTTP (–±–µ–∑ –ø—Ä–æ–∫—Å–∏): 0/0
   üìä HTTP (—Å –ø—Ä–æ–∫—Å–∏): 41/53
```

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 0/0 –∑–∞–ø—Ä–æ—Å–æ–≤ –±–µ–∑ –ø—Ä–æ–∫—Å–∏, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ —Ä–µ–∂–∏–º –±–µ–∑ –ø—Ä–æ–∫—Å–∏.

---

## üîç –ê–ù–ê–õ–ò–ó –õ–û–ì–û–í

### üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑ –ª–æ–≥–æ–≤:
- `'success_rate': 0.0%` - —É—Å–ø–µ—à–Ω–æ—Å—Ç—å 0%
- `'errors_403': 4` - 4 –æ—à–∏–±–∫–∏ 403
- `'consecutive_errors': 8` - 8 –æ—à–∏–±–æ–∫ –ø–æ–¥—Ä—è–¥
- `'should_use_proxy': True` - —Å–∏—Å—Ç–µ–º–∞ —Ä–µ—à–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ–∫—Å–∏

### üéØ –ü—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã:

–°–∏—Å—Ç–µ–º–∞ –Ω–µ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ —Ä–µ–∂–∏–º –±–µ–∑ –ø—Ä–æ–∫—Å–∏, –ø–æ—Ç–æ–º—É —á—Ç–æ:

1. **–£—Å–ø–µ—à–Ω–æ—Å—Ç—å 0%** (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å > 80%)
2. **4 –æ—à–∏–±–∫–∏ 403** (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å < 3)
3. **8 –æ—à–∏–±–æ–∫ –ø–æ–¥—Ä—è–¥** (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å < 2)

**–£—Å–ª–æ–≤–∏—è –¥–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–æ–∫—Å–∏:**
```python
if (success_rate > 80 and 
    total_errors < 3 and 
    consecutive_errors < 2):
    return False  # –û—Ç–∫–ª—é—á–∞–µ–º –ø—Ä–æ–∫—Å–∏
```

---

## ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–∫—Å–∏:

**–ü–†–ê–í–ò–õ–¨–ù–ê–Ø –õ–û–ì–ò–ö–ê:**
1. **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é**: –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ–∫—Å–∏ (—ç–∫–æ–Ω–æ–º–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞)
2. **–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö**: –í–∫–ª—é—á–∞–µ–º –ø—Ä–æ–∫—Å–∏ (—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å)

```python
# –ü–û –£–ú–û–õ–ß–ê–ù–ò–Æ: –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ–∫—Å–∏ (—ç–∫–æ–Ω–æ–º–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞)
# –í–∫–ª—é—á–∞–µ–º –ø—Ä–æ–∫—Å–∏ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö

# –ï—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã - –≤–∫–ª—é—á–∞–µ–º –ø—Ä–æ–∫—Å–∏
if (total_errors >= 3 or 
    self.consecutive_errors >= 3 or
    success_rate < 70):
    logging.warning(f"‚ö†Ô∏è –ü–†–û–ë–õ–ï–ú–´ –û–ë–ù–ê–†–£–ñ–ï–ù–´: –í–∫–ª—é—á–∞–µ–º –ø—Ä–æ–∫—Å–∏")
    return True

# –ï—Å–ª–∏ —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ - –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ–∫—Å–∏ (—ç–∫–æ–Ω–æ–º–∏—è)
logging.info(f"üí∞ –≠–ö–û–ù–û–ú–ò–Ø –¢–†–ê–§–ò–ö–ê: –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ–∫—Å–∏")
return False
```

3. **–ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```python
logging.info(f"üîç –ê–ù–ê–õ–ò–ó –ü–†–û–ö–°–ò: —É—Å–ø–µ—à–Ω–æ—Å—Ç—å={success_rate:.1f}%, –æ—à–∏–±–æ–∫={total_errors}, –ø–æ–¥—Ä—è–¥={self.consecutive_errors}")
```

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤:

1. **–ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**: –ü—Ä–æ–∫—Å–∏ –ù–ï –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è ‚úÖ
2. **–ù–µ—Å–∫–æ–ª—å–∫–æ –æ—à–∏–±–æ–∫**: –ü—Ä–æ–∫—Å–∏ –≤–∫–ª—é—á–∞—é—Ç—Å—è ‚úÖ
3. **–ú–Ω–æ–≥–æ –æ—à–∏–±–æ–∫ –ø–æ–¥—Ä—è–¥**: –ü—Ä–æ–∫—Å–∏ –≤–∫–ª—é—á–∞—é—Ç—Å—è ‚úÖ
4. **–ù–∏–∑–∫–∞—è —É—Å–ø–µ—à–Ω–æ—Å—Ç—å**: –ü—Ä–æ–∫—Å–∏ –≤–∫–ª—é—á–∞—é—Ç—Å—è ‚úÖ
5. **–°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞**: –ü—Ä–æ–∫—Å–∏ –ù–ï –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è (—ç–∫–æ–Ω–æ–º–∏—è) ‚úÖ

---

## üìä –¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï

### üîç –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Ä–∞–±–æ—Ç—É:
```
üîç –ê–ù–ê–õ–ò–ó –ü–†–û–ö–°–ò: —É—Å–ø–µ—à–Ω–æ—Å—Ç—å=0.0%, –æ—à–∏–±–æ–∫=0, –ø–æ–¥—Ä—è–¥=0
üîß –ü—Ä–æ–∫—Å–∏ –≤–∫–ª—é—á–µ–Ω—ã (–∞–≤—Ç–æ —Ä–µ–∂–∏–º)
```

### üéØ –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:
- ‚úÖ –õ–æ–≥–∏–∫–∞ –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–∫—Å–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ
- ‚úÖ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –¥–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–æ–∫—Å–∏
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

---

## üí° –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### üéØ –î–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã:

1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É `/status` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
2. **–õ–æ–≥–∏**: –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π "üîç –ê–ù–ê–õ–ò–ó –ü–†–û–ö–°–ò"
3. **–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `/recovery force_noproxy` –ø—Ä–∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç–µ
4. **–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `/recovery force_proxy` –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö

### üìà –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:

- **–ü—Ä–∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç–µ** (>70% —É—Å–ø–µ—à–Ω–æ—Å—Ç—å, <3 –æ—à–∏–±–æ–∫): –ø—Ä–æ–∫—Å–∏ –ù–ï –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
- **–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö** (‚â•3 –æ—à–∏–±–æ–∫ –∏–ª–∏ ‚â•3 –æ—à–∏–±–æ–∫ –ø–æ–¥—Ä—è–¥): –ø—Ä–æ–∫—Å–∏ –≤–∫–ª—é—á–∞—é—Ç—Å—è
- **–ü—Ä–∏ –Ω–∏–∑–∫–æ–π —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏** (<70%): –ø—Ä–æ–∫—Å–∏ –≤–∫–ª—é—á–∞—é—Ç—Å—è

---

## ‚úÖ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**–ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞**: –°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏—è –æ –ø—Ä–æ–∫—Å–∏. –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Ä–µ—à–µ–Ω–∏–π —Å–∏—Å—Ç–µ–º—ã. 